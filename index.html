<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğ”¯ğ”¬ğ”±ğ”ğ”±ğ”¦ğ”¬ğ”«ğğğ‹ğ˜ | High-Authority Monetization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f5f5f4; color: #1c1917; }
        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin: 0 auto; height: 250px; }
        #main-interface { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .loading-shimmer { background: linear-gradient(90deg, #f5f5f4 25%, #e7e5e4 50%, #f5f5f4 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="antialiased min-h-screen">

    <!-- Passcode Overlay -->
    <div id="auth-overlay" class="fixed inset-0 z-[100] bg-stone-100 flex items-center justify-center p-6">
        <div class="max-w-md w-full text-center space-y-8 fade-in">
            <h1 class="text-4xl serif italic text-stone-900 tracking-tighter">ğ”¯ğ”¬ğ”±ğ”ğ”±ğ”¦ğ”¬ğ”«ğğğ‹ğ˜</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl border border-stone-200">
                <p class="text-[10px] uppercase tracking-[0.2em] font-bold text-stone-400 mb-6">Encrypted Access Required</p>
                <input type="password" id="passcode-input" placeholder="â€¢â€¢â€¢â€¢" 
                    class="w-full p-4 text-center text-2xl tracking-[0.5em] bg-stone-50 border border-stone-200 rounded-2xl focus:ring-2 focus:ring-stone-900 focus:outline-none mb-4">
                <button onclick="verifyPasscode()" class="w-full bg-stone-900 text-white py-4 rounded-2xl font-bold hover:bg-stone-800 transition-all shadow-lg">Authenticate</button>
                <p id="auth-error" class="text-red-500 text-xs mt-4 hidden">Invalid passcode.</p>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="main-interface">
        <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
            <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
                <h1 class="text-xl font-bold tracking-tight uppercase">ğ”¯ğ”¬ğ”±ğ”ğ”±ğ”¦ğ”¬ğ”«ğğğ‹ğ˜</h1>
                <div class="flex items-center space-x-4">
                    <button onclick="updateKey()" class="text-[10px] font-bold uppercase tracking-widest text-stone-500 hover:text-stone-900">Update API Key</button>
                    <button onclick="logout()" class="text-[10px] font-bold uppercase tracking-widest text-red-500 hover:text-red-700">Lock</button>
                </div>
            </div>
        </header>

        <main class="max-w-6xl mx-auto px-6 py-10 space-y-12">
            <!-- AI Suite -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Content Architect -->
                <div class="bg-white p-6 rounded-2xl border border-stone-200 shadow-sm">
                    <h3 class="font-bold text-stone-800 mb-4 flex items-center gap-2">âœ¨ Content Architect</h3>
                    <textarea id="ai-prompt" placeholder="Describe the vibe..." class="w-full h-32 p-4 text-sm bg-stone-50 border border-stone-100 rounded-xl focus:outline-none focus:ring-1 focus:ring-stone-300 mb-4"></textarea>
                    <button onclick="generateAction('architect')" class="w-full bg-stone-900 text-white py-3 rounded-xl text-sm font-bold hover:bg-stone-800 transition-all">Generate Strategy</button>
                    <div id="out-architect" class="hidden mt-6 p-4 bg-stone-50 rounded-xl text-sm text-stone-600 border border-stone-100 italic whitespace-pre-wrap"></div>
                </div>

                <!-- Reply Optimizer -->
                <div class="bg-white p-6 rounded-2xl border border-stone-200 shadow-sm">
                    <h3 class="font-bold text-stone-800 mb-4">âœ¨ Reply Optimizer</h3>
                    <textarea id="ai-reply" placeholder="Post content to reply to..." class="w-full h-32 p-4 text-sm bg-stone-50 border border-stone-100 rounded-xl focus:outline-none focus:ring-1 focus:ring-stone-300 mb-4"></textarea>
                    <button onclick="generateAction('reply')" class="w-full border border-stone-900 text-stone-900 py-3 rounded-xl text-sm font-bold hover:bg-stone-50 transition-all">Draft High-Value Reply</button>
                    <div id="out-reply" class="hidden mt-6 p-4 bg-stone-50 rounded-xl text-sm text-stone-600 border border-stone-100 italic"></div>
                </div>

                <!-- Revenue Simulator -->
                <div class="bg-white p-6 rounded-2xl border border-stone-200 shadow-sm">
                    <h3 class="font-bold text-stone-800 mb-4">âœ¨ ROI Simulator</h3>
                    <div class="space-y-4">
                        <input type="number" id="sim-followers" value="1000" class="w-full p-3 bg-stone-50 border border-stone-100 rounded-lg text-sm">
                        <select id="sim-type" class="w-full p-3 bg-stone-50 border border-stone-100 rounded-lg text-sm">
                            <option value="digital product">Digital Product ($25)</option>
                            <option value="newsletter">Newsletter ($5/mo)</option>
                        </select>
                        <button onclick="generateAction('sim')" class="w-full border border-stone-900 py-3 rounded-xl text-sm font-bold">Predict Revenue</button>
                        <div id="out-sim" class="hidden mt-4 text-xs text-stone-500 font-mono"></div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Analytics -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-2xl border border-stone-200">
                    <h3 class="text-xl serif mb-6">Algorithm Weighting</h3>
                    <div class="chart-container"><canvas id="algoChart"></canvas></div>
                </div>
                <div class="bg-stone-900 text-white p-8 rounded-2xl flex flex-col justify-center text-center">
                    <p class="text-stone-500 text-[10px] uppercase tracking-[0.3em] font-bold mb-4">Revenue Milestone</p>
                    <h2 id="rev-val" class="text-7xl serif mb-6">$0</h2>
                    <div class="w-full bg-stone-800 rounded-full h-3 mb-4 overflow-hidden">
                        <div id="rev-bar" class="bg-white h-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                    <p class="text-stone-400 text-xs">Progress toward $1,000 Monthly Passive Goal</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        const SYSTEM_PASSCODE = "2026";
        // Updated model ID to the most stable production name
        const MODEL_NAME = "gemini-1.5-flash-latest"; 

        function verifyPasscode() {
            const val = document.getElementById('passcode-input').value;
            if (val === SYSTEM_PASSCODE) {
                localStorage.setItem("AUTH", "true");
                showApp();
            } else {
                document.getElementById('auth-error').classList.remove('hidden');
            }
        }

        async function getApiKey() {
            let key = localStorage.getItem("GEMINI_KEY");
            if (!key) {
                key = window.prompt("Enter your Google Gemini API Key:");
                if (key) localStorage.setItem("GEMINI_KEY", key);
            }
            return key;
        }

        function updateKey() {
            localStorage.removeItem("GEMINI_KEY");
            getApiKey().then(() => location.reload());
        }

        function logout() {
            localStorage.removeItem("AUTH");
            location.reload();
        }

        async function callGemini(promptText) {
            const key = await getApiKey();
            if (!key) return "Error: Missing API Key.";

            // URL format for v1beta with specific model ID
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${key}`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: promptText }]
                        }]
                    })
                });

                const data = await response.json();

                if (data.error) {
                    return `API Error: ${data.error.message}`;
                }

                return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response generated.";
            } catch (err) {
                return `System Error: ${err.message}`;
            }
        }

        async function generateAction(type) {
            const out = document.getElementById(`out-${type}`);
            out.classList.remove('hidden');
            out.innerHTML = '<div class="loading-shimmer h-4 w-full rounded"></div>';
            
            let prompt = "";
            if (type === 'architect') prompt = `Act as a luxury brand strategist. Create a 3-part X thread strategy for: ${document.getElementById('ai-prompt').value}`;
            if (type === 'reply') prompt = `Create a sophisticated, high-authority X reply for: ${document.getElementById('ai-reply').value}`;
            if (type === 'sim') prompt = `Calculate monthly revenue for ${document.getElementById('sim-followers').value} followers using ${document.getElementById('sim-type').value}. Show calculation.`;

            const res = await callGemini(prompt);
            out.innerText = res;

            if (type === 'sim') {
                const match = res.match(/\$(\d+)/);
                if (match) updateRev(parseInt(match[1]));
            }
        }

        function updateRev(val) {
            document.getElementById('rev-val').innerText = `$${val}`;
            const pct = Math.min((val / 1000) * 100, 100);
            document.getElementById('rev-bar').style.width = pct + "%";
        }

        function initChart() {
            const ctx = document.getElementById('algoChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Reply', 'Bookmark', 'Repost'],
                    datasets: [{ data: [13.5, 10, 20], backgroundColor: '#1c1917' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
        }

        function showApp() {
            document.getElementById('auth-overlay').style.display = 'none';
            document.getElementById('main-interface').style.display = 'block';
            initChart();
        }

        window.onload = () => {
            if (localStorage.getItem("AUTH") === "true") showApp();
        };

        document.getElementById('passcode-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') verifyPasscode();
        });
    </script>
</body>
</html>
